/*
This file is part of the Adambots Automated Scouting Kit (AASK).

AASK is free software: you can redistribute it and/or modify it under the terms
of the GNU General Public License as published by the Free Software Foundation,
either version 3 of the License, or (at your option) any later version.

AASK is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with
AASK.  If not, see <http://www.gnu.org/licenses/>.

AASK was started during the 2013 FIRST season by Ben Bray and Curtis Fenner of
Team 245, the Adambots, for use by other FRC teams.
*/

//// TABLE CONSTRUCTOR --------------------------------------------------------

/**
 * A "Table" occurs on a page when consecutive rows of data contains numbers. The row immediately before the data-rows is used as a heading.
 * 
 * heading/headings/header/headers :: String[] The names of the columns (in caps) of the data.
 * data :: Int[row][col]  The data filling the cells. NaNs in most cases where there are no parseable numbers.
 * raw :: String[row][col] the text filling the cells. data[row][col] == parseFloat(raw[row][col]), essentially.
 */
function Table(heading,raw,data) {
	this.heading = this.headings = this.header = this.headers = heading;
	this.raw = raw;
	this.data = data;
}

//// WEBSITE SCRAPER ----------------------------------------------------------

/**
 * Cross platform method to get XMLHttpRequest objects. Taken from an article
 * published by Brett McLaughlin.
 */
function createRequest() {
	var request;
	try{
		request = new XMLHttpRequest();
	} catch(trymicrosoft) {
		try{
			request = new ActiveXObject("Msxml2.XMLHTTP");
		}catch(othermicrosoft){
			try{
				request = new ActiveXObject("Microsoft.XMLHTTP");
			} catch(failed) {
				request = false;
			}
		}
	}
	// Ensure Request Existence
	if(!request) {
		alert("Unfortunately, your browser cannot utilize AASK. Please enable, or switch to a browser with, XMLHttpRequests! (Chrome, Opera, Safari, IE, others)");
	}
	return request;
}

//// PAGE CONSTRCUTOR ---------------------------------------------------------

let matchresultsCache = `1422394149]$ [There was no cache];;
FIRST CHAMPIONSHIP - GALILEO DIVISION;4/26/2013 - 4/27/2013;
AWARDS;MATCH RESULTS;TEAM STANDINGS;QUAL SCHEDULE;ELIM SCHEDULE;
DATA&NBSP,AS OF MATCH NUMBER 134;
QUALIFICATION MATCHES;
TIME;MATCH;RED 1;RED 2;RED 3;BLUE 1;BLUE 2;BLUE 3;RED SCORE;BLUE SCORE;
1:00 PM;1;2175;4158;4452;4627;2834;245;79;125;
1:09 PM;2;4462;1629;1772;2169;70;4641;106;187;
1:15 PM;3;2000;3528;1405;1801;2502;2338;73;81;
1:21 PM;4;384;2978;2630;4557;2474;4026;99;85;
1:30 PM;5;151;1710;1086;45;3656;1218;32;107;
1:35 PM;6;2403;4607;1323;118;3284;447;86;147;
1:46 PM;7;1675;1114;1806;1241;4334;1477;141;150;
1:52 PM;8;192;4797;744;3941;842;422;68;104;
2:03 PM;9;2337;2199;95;4011;3018;2259;103;63;
2:11 PM;10;2485;467;4541;2341;27;1325;51;52;
2:18 PM;11;358;2648;1429;610;3189;295;92;115;
2:24 PM;12;111;4601;4579;2729;3944;4039;145;168;
2:31 PM;13;2046;1732;4567;222;2512;3459;117;188;
2:37 PM;14;1912;4472;578;3641;3132;329;73;113;
2:43 PM;15;2809;3211;4502;2907;125;4492;62;93;
2:52 PM;16;3481;4481;1987;337;4069;4522;80;81;
2:59 PM;17;1378;1726;192;2481;1425;1710;46;167;
3:07 PM;18;2337;1114;2502;2978;3941;1323;156;107;
3:13 PM;19;295;4334;1405;2403;2175;1086;144;77;
3:20 PM;20;1241;2259;4641;2729;422;2630;114;177;
3:27 PM;21;4026;2512;1772;2000;1675;3656;98;107;
3:33 PM;22;245;1629;2046;842;118;2199;126;146;
3:41 PM;23;4452;3132;3944;222;1325;744;110;118;
3:48 PM;24;1987;578;2809;4607;2648;1806;45;126;
3:54 PM;25;3284;2338;1378;4601;329;95;83;101;
4:01 PM;26;3459;4797;4557;4627;2169;2485;45;152;
4:08 PM;27;3211;1801;4462;151;4579;1732;30;103;
4:14 PM;28;3018;3641;2341;2474;1726;3189;86;38;
4:20 PM;29;4567;4472;125;70;4481;610;93;126;
4:32 PM;30;4522;111;1912;45;384;4502;82;42;
4:38 PM;31;4039;2481;4069;1218;358;4541;142;116;
4:45 PM;32;447;467;337;3528;2907;2834;87;134;
4:53 PM;33;1429;4492;27;1477;3481;1425;126;156;
5:01 PM;34;4158;1405;118;4011;1114;192;131;139;
5:07 PM;35;4452;2502;2485;4579;2199;1710;94;97;
5:14 PM;36;2338;4557;3189;4607;1325;1675;118;60;
5:20 PM;37;3211;578;3941;1086;4567;4601;112;41;
5:28 PM;38;4522;3944;2337;245;1378;2512;36;189;
5:34 PM;39;2169;2175;1241;4502;1218;1726;201;109;
5:42 PM;40;447;2729;610;2809;384;2341;80;79;
5:51 PM;41;1987;1429;3132;4462;2259;125;50;103;
5:58 PM;42;2046;4158;337;4797;4541;45;71;46;
6:04 PM;43;4069;4011;2648;3459;3641;3528;125;130;
6:52 PM;44;329;70;1801;1323;1425;358;103;164;
6:57 PM;45;1912;4039;4481;1772;4334;1732;109;129;
7:06 PM;46;222;3481;842;3018;467;2630;133;77;
7:13 PM;47;1806;2474;4492;295;3656;95;125;98;
7:21 PM;48;2978;2481;2907;2000;1629;4472;105;153;
7:27 PM;49;2834;1477;3284;111;4026;422;128;143;
7:34 PM;50;4627;2403;744;151;27;4641;78;109;
7:40 PM;51;4541;2648;2259;4601;192;4522;112;117;
7:47 PM;52;4011;2485;384;3941;2512;337;110;139;
9:30 AM;53;2341;4557;1114;70;4452;1912;136;125;
9:55 AM;54;4579;2169;842;447;2337;4158;143;116;
10:01 AM;55;4797;3211;95;1405;1710;1772;70;55;
10:09 AM;56;610;1218;2199;222;1378;2907;122;140;
10:18 AM;57;1323;4472;3018;3528;4492;245;62;149;
10:24 AM;58;4334;1726;4069;422;578;4627;148;55;
10:30 AM;59;2729;1325;1801;1477;2474;2403;96;128;
10:36 AM;60;111;3641;4607;1629;1429;151;140;64;
10:44 AM;61;4026;27;118;358;125;1806;205;187;
10:50 AM;62;295;3481;1675;2481;2809;45;119;57;
10:58 AM;63;4502;2834;2978;4481;2338;3944;66;125;
11:04 AM;64;4462;1086;2630;2046;744;329;75;72;
11:11 AM;65;2000;3189;1425;2175;1732;4641;83;116;
11:17 AM;66;3459;2502;4039;1987;1241;467;85;85;
11:23 AM;67;3656;3284;3528;4567;3132;1726;118;97;
11:29 AM;68;4579;2403;3941;1429;1378;1912;101;33;
11:39 AM;69;358;2474;2512;3211;447;4472;170;88;
11:45 AM;70;70;4158;2481;2729;1806;3641;174;193;
11:53 AM;71;2338;245;222;1772;151;2485;148;113;
12:02 PM;72;1477;45;2648;1405;2199;4557;89;99;
1:00 PM;73;27;578;2630;2175;1675;337;129;109;
1:06 PM;74;1323;3944;2000;4462;4069;95;125;88;
1:13 PM;75;384;2169;4039;3284;1114;1425;98;223;
1:20 PM;76;2337;610;4627;4026;2046;1801;152;59;
1:26 PM;77;2341;2502;842;4641;4011;4502;77;63;
1:33 PM;78;4334;1325;3656;4797;125;3481;165;87;
1:40 PM;79;2259;329;3189;1218;4567;2834;73;98;
1:52 PM;80;4492;1710;744;4522;2978;467;91;70;
1:58 PM;81;118;4541;2809;3132;1086;4481;126;100;
2:06 PM;82;1732;1987;2907;192;111;4452;154;104;
2:13 PM;83;3018;422;4601;295;3459;4607;125;58;
2:20 PM;84;1241;2403;337;1629;2337;3211;102;75;
2:29 PM;85;2729;1726;4557;358;3941;151;117;83;
2:38 PM;86;1325;1806;1772;1429;3284;2199;122;68;
2:48 PM;87;3656;3189;4502;2630;4472;4627;88;115;
2:55 PM;88;1218;1425;2648;4026;467;4158;191;120;
3:03 PM;89;70;447;2000;4334;2259;1378;116;78;
3:10 PM;90;1086;1477;384;95;3528;1732;117;94;
3:17 PM;91;1675;3132;3459;1323;111;1710;73;178;
3:30 PM;92;4567;2169;295;3641;3944;192;150;56;
3:38 PM;93;329;4011;2474;3481;4541;4579;161;91;
3:44 PM;94;245;2907;2341;744;578;4481;134;125;
3:51 PM;95;1912;2834;222;118;1987;1801;84;159;
3:57 PM;96;2512;27;3018;4797;4462;2338;136;132;
4:04 PM;97;2978;2809;842;4601;4452;1241;78;122;
4:13 PM;98;1405;4641;4522;610;4039;4607;56;168;
4:22 PM;99;1629;125;45;4069;1114;2485;98;168;
4:29 PM;100;2046;422;2175;2502;4492;2481;123;74;
4:36 PM;101;1732;1323;3641;2199;4541;4502;182;83;
4:44 PM;102;4579;358;192;2341;1772;3528;75;147;
4:51 PM;103;245;1987;1325;2169;2630;3211;117;190;
5:02 PM;104;1086;222;3284;2337;2474;2648;137;155;
5:08 PM;105;578;3481;95;3459;3189;2403;63;105;
5:16 PM;106;118;4627;1241;1429;3018;70;124;105;
5:25 PM;107;1726;45;4481;467;4452;2000;133;93;
5:31 PM;108;1378;125;2834;744;1405;1675;142;119;
5:39 PM;109;610;1114;111;842;2481;2512;160;117;
5:45 PM;110;4462;2907;1425;4567;2485;4607;155;148;
5:52 PM;111;2809;1710;337;4557;4039;329;61;136;
5:58 PM;112;2259;3941;2175;2338;4069;1806;153;180;
6:05 PM;113;4026;151;4601;3132;2502;4334;82;134;
6:12 PM;114;1477;447;4011;3656;2046;2978;115;118;
6:18 PM;115;1218;295;1629;4522;4797;2729;128;81;
8:15 AM;116;1801;384;422;4472;27;3944;47;81;
8:19 AM;117;1912;4641;1726;4492;4158;1325;84;84;
8:26 AM;118;111;3528;4627;2474;4481;1378;119;132;
8:32 AM;119;4541;95;2512;2834;4607;70;115;85;
8:39 AM;120;2630;118;45;4579;3641;610;162;144;
8:47 AM;121;2481;2169;3941;222;4334;3189;151;147;
8:55 AM;122;192;4069;1675;3284;2502;3211;127;107;
9:04 AM;123;1241;125;2199;4522;447;578;204;53;
9:09 AM;124;2046;1772;1218;1114;4601;1987;103;212;
9:17 AM;125;3656;4158;2338;384;744;1429;117;85;
9:23 AM;126;1806;4452;3481;4462;422;4039;93;125;
9:30 AM;127;3459;2978;1425;1912;1405;337;175;105;
9:43 AM;128;1629;1323;4567;2809;27;4011;106;99;
9:50 AM;129;151;2337;2341;329;2000;295;76;151;
9:57 AM;130;1710;1477;3944;2175;842;2907;100;86;
10:04 AM;131;4797;1732;4492;2403;2259;358;108;138;
10:10 AM;132;467;245;4557;1801;1086;4641;88;33;
10:18 AM;133;3018;4502;3132;2648;2729;2485;120;224;
10:24 AM;134;4026;4452;4607;4472;4579;2338;68;94;
DATA&NBSP,AS OF MATCH NUMBER 20;
ELIMINATION MATCHES;
TIME;DESCRIPTION;MATCH;RED 1;RED 2;RED 3;BLUE 1;BLUE 2;BLUE 3;RED SCORE;BLUE SCORE;
12:00 PM;QTR 1-1;1;4039;1114;118;1732;245;27;213;170;
12:07 PM;QTR 2-1;2;2630;3641;111;1241;610;1477;199;181;
12:15 PM;QTR 3-1;3;3284;2175;2169;2338;1323;2512;189;154;
12:22 PM;QTR 4-1;4;2337;1425;2474;1806;3656;4334;194;122;
12:30 PM;QTR 1-2;5;118;4039;1114;1732;245;27;148;166;
12:38 PM;QTR 2-2;6;111;3641;2630;1477;1241;610;201;216;
12:48 PM;QTR 3-2;7;2175;3284;2169;2512;1323;2338;136;137;
12:54 PM;QTR 4-2;8;2337;2474;1425;3656;1806;4334;218;125;
1:06 PM;QTR 1-3;9;1114;118;4039;245;27;1732;288;186;
1:16 PM;QTR 2-3;10;2630;3641;111;610;1477;1241;193;203;
1:24 PM;QTR 3-3;11;3284;2169;2175;2512;1323;2338;224;109;
1:31 PM;SEMI 1-1;13;1114;4039;118;610;1241;1477;243;207;
1:45 PM;SEMI 2-1;14;2175;3284;2169;2474;2337;1425;101;106;
1:54 PM;SEMI 1-2;15;1114;118;4039;1477;1241;610;203;230;
2:08 PM;SEMI 2-2;16;2175;2169;3284;1425;2337;2474;135;108;
2:17 PM;SEMI 1-3;17;1114;118;4039;1477;1241;610;219;235;
2:24 PM;SEMI 2-3;18;2169;2175;3284;1425;2337;2474;156;117;
2:40 PM;FINAL 1-1;19;610;1241;1477;3284;2169;2175;164;59;
3:00 PM;FINAL 1-2;20;610;1241;1477;3284;2169;2175;193;174;
&NBSP, MATCH SCHEDULING SOFTWARE &#169, 2007 IDLE LOOP SOFTWARE DESIGN, LLC.;
&NBSP, FIRST&#8212, FOR INSPIRATION AND RECOGNITION OF SCIENCE AND TECHNOLOGY;COPYRIGHT &#169, 2013 FIRST &NBSP,;
;DATA BROUGHT TO YOU BY 4FX DESIGN;;
;`;

let rankingsCache = `1422394149]$ [There was no cache];;
FIRST CHAMPIONSHIP - GALILEO DIVISION;4/25/2013 - 4/27/2013;
AWARDS;MATCH RESULTS;TEAM STANDINGS;QUAL SCHEDULE;ELIM SCHEDULE;
DATA&NBSP,AS OF MATCH NUMBER 134;
RANK;TEAM;QS;AP;CP;TP;RECORD (W-L-T);DQ;PLAYED;
1;118;14.00;394.00;170.00;636.00;7-1-0;0;8;
2;1114;14.00;336.00;320.00;679.00;7-1-0;0;8;
3;2169;14.00;304.00;210.00;758.00;7-1-0;0;8;
4;1425;14.00;300.00;220.00;794.00;7-1-0;0;8;
5;2630;14.00;250.00;130.00;644.00;7-1-0;0;8;
6;1241;13.00;330.00;170.00;602.00;6-1-1;0;8;
7;2474;12.00;360.00;120.00;514.00;6-2-0;0;8;
8;3656;12.00;338.00;170.00;410.00;6-2-0;0;8;
9;2338;12.00;320.00;170.00;470.00;6-2-0;0;8;
10;2512;12.00;310.00;190.00;652.00;6-2-0;0;8;
11;245;12.00;308.00;150.00;618.00;6-2-0;0;8;
12;4069;12.00;302.00;220.00;537.00;6-2-0;0;8;
13;295;12.00;302.00;160.00;501.00;6-2-0;0;8;
14;610;12.00;292.00;210.00;565.00;6-2-0;0;8;
15;2729;12.00;288.00;200.00;648.00;6-2-0;0;8;
16;2907;12.00;288.00;190.00;523.00;6-2-0;0;8;
17;3641;12.00;284.00;200.00;560.00;6-2-0;0;8;
18;4334;12.00;280.00;180.00;635.00;6-2-0;0;8;
19;27;12.00;272.00;110.00;555.00;6-2-0;0;8;
20;422;12.00;252.00;190.00;457.00;6-2-0;0;8;
21;2341;12.00;234.00;160.00;393.00;6-2-0;0;8;
22;4557;12.00;228.00;170.00;426.00;6-2-0;0;8;
23;4039;11.00;302.00;190.00;539.00;5-2-1;0;8;
24;3528;10.00;366.00;160.00;438.00;5-3-0;0;8;
25;111;10.00;352.00;170.00;549.00;5-3-0;0;8;
26;1732;10.00;342.00;130.00;531.00;5-3-0;0;8;
27;1477;10.00;332.00;180.00;471.00;5-3-0;0;8;
28;1323;10.00;322.00;150.00;538.00;5-3-0;0;8;
29;2000;10.00;310.00;160.00;431.00;5-3-0;0;8;
30;222;10.00;300.00;150.00;645.00;5-3-0;0;8;
31;4601;10.00;280.00;210.00;455.00;5-3-0;0;8;
32;3944;10.00;276.00;110.00;415.00;5-3-0;0;8;
33;2199;10.00;268.00;220.00;434.00;5-3-0;0;8;
34;1806;10.00;264.00;250.00;653.00;5-3-0;0;8;
35;2403;10.00;262.00;220.00;333.00;5-3-0;0;8;
36;3941;10.00;258.00;220.00;472.00;5-3-0;0;8;
37;4627;10.00;246.00;160.00;514.00;5-3-0;0;8;
38;329;10.00;244.00;100.00;566.00;5-3-0;0;8;
39;842;10.00;240.00;280.00;364.00;5-3-0;0;8;
40;1710;10.00;222.00;150.00;409.00;5-3-0;0;8;
41;3459;9.00;316.00;130.00;413.00;4-3-1;0;8;
42;4492;9.00;266.00;110.00;474.00;4-3-1;0;8;
43;2502;9.00;238.00;190.00;380.00;4-3-1;0;8;
44;1325;9.00;228.00;130.00;456.00;4-3-1;0;8;
45;4481;8.00;354.00;160.00;416.00;4-4-0;0;8;
46;2337;8.00;320.00;170.00;379.00;4-4-0;0;8;
47;125;8.00;300.00;190.00;517.00;4-4-0;0;8;
48;2834;8.00;298.00;140.00;424.00;4-4-0;0;8;
49;4579;8.00;286.00;200.00;410.00;4-4-0;0;8;
50;2648;8.00;282.00;210.00;622.00;4-4-0;0;8;
51;1378;8.00;276.00;70.00;497.00;4-4-0;0;8;
52;4472;8.00;268.00;140.00;351.00;4-4-0;0;8;
53;1218;8.00;250.00;190.00;534.00;4-4-0;0;8;
54;4462;8.00;228.00;140.00;446.00;4-4-0;0;8;
55;95;8.00;214.00;180.00;338.00;4-4-0;0;8;
56;337;8.00;194.00;180.00;381.00;4-4-0;0;8;
57;1987;7.00;286.00;150.00;466.00;3-4-1;0;8;
58;1726;7.00;228.00;150.00;394.00;3-4-1;0;8;
59;4641;7.00;212.00;160.00;390.00;3-4-1;0;8;
60;70;6.00;350.00;210.00;461.00;3-5-0;0;8;
61;1629;6.00;326.00;120.00;410.00;3-5-0;0;8;
62;2978;6.00;324.00;150.00;344.00;3-5-0;0;8;
63;3284;6.00;318.00;180.00;513.00;3-5-0;0;8;
64;2175;6.00;306.00;120.00;518.00;3-5-0;0;8;
65;447;6.00;302.00;200.00;300.00;3-5-0;0;8;
66;3481;6.00;286.00;170.00;366.00;3-5-0;0;8;
67;2481;6.00;284.00;300.00;403.00;3-5-0;0;8;
68;1675;6.00;284.00;130.00;441.00;3-5-0;0;8;
69;2485;6.00;270.00;140.00;650.00;3-5-0;0;8;
70;1772;6.00;268.00;160.00;445.00;3-5-0;0;8;
71;45;6.00;262.00;130.00;342.00;3-5-0;0;8;
72;3211;6.00;260.00;140.00;334.00;3-5-0;0;8;
73;358;6.00;236.00;290.00;499.00;3-5-0;0;8;
74;4567;6.00;234.00;90.00;526.00;3-5-0;0;8;
75;4607;6.00;224.00;130.00;525.00;3-5-0;0;8;
76;2046;6.00;224.00;100.00;465.00;3-5-0;0;8;
77;3018;6.00;218.00;270.00;286.00;3-5-0;0;8;
78;4522;6.00;218.00;150.00;208.00;3-5-0;0;8;
79;192;6.00;216.00;130.00;386.00;3-5-0;0;8;
80;3189;6.00;206.00;170.00;391.00;3-5-0;0;8;
81;4158;5.00;318.00;190.00;384.00;2-5-1;0;8;
82;4011;4.00;274.00;170.00;431.00;2-6-0;0;8;
83;578;4.00;262.00;130.00;263.00;2-6-0;0;8;
84;4026;4.00;260.00;150.00;450.00;2-6-0;0;8;
85;3132;4.00;252.00;150.00;395.00;2-6-0;0;8;
86;1405;4.00;242.00;170.00;370.00;2-6-0;0;8;
87;151;4.00;228.00;140.00;294.00;2-6-0;0;8;
88;2259;4.00;218.00;200.00;416.00;2-6-0;0;8;
89;384;4.00;216.00;90.00;371.00;2-6-0;0;8;
90;744;4.00;212.00;140.00;404.00;2-6-0;0;8;
91;1801;4.00;204.00;110.00;294.00;2-6-0;0;8;
92;1086;4.00;174.00;100.00;338.00;2-6-0;0;8;
93;4541;4.00;154.00;280.00;306.00;2-6-0;0;8;
94;1912;3.00;240.00;120.00;335.00;1-6-1;0;8;
95;467;3.00;222.00;140.00;309.00;1-6-1;0;8;
96;4452;2.00;286.00;140.00;368.00;1-7-0;0;8;
97;2809;2.00;236.00;130.00;241.00;1-7-0;0;8;
98;4797;2.00;156.00;210.00;271.00;1-7-0;0;8;
99;4502;0;212.00;190.00;231.00;0-8-0;0;8;
100;1429;0;198.00;120.00;272.00;0-7-0;1;8;
&NBSP, QS - QUALIFICATION SCORE &NBSP, AP - TOTAL DISC POINTS IN AUTONOMOUS PERIOD &NBSP, CP - TOTAL CLIMB POINTS &NBSP, TP - TOTAL TELEOP POINTS (DISC POINTS + FOUL POINTS);;
&NBSP,;
&NBSP, MATCH SCHEDULING SOFTWARE &#169, 2007 IDLE LOOP SOFTWARE DESIGN, LLC.;
&NBSP, FIRST&#8212, FOR INSPIRATION AND RECOGNITION OF SCIENCE AND TECHNOLOGY;COPYRIGHT &#169, 2013 FIRST &NBSP,;
;DATA BROUGHT TO YOU BY 4FX DESIGN;;
;`;

/**
 * Constructors a "page" object with .tables representing the list of "data tables" on the page.
 *
 * url: The url after the domain to parse, e.g. "2013comp/Events/MIGBL/rankings.html"
 *
 * obj.tables :: Table[] of data tables appearing on page.
 * obj.ready :: bool True when the data has been parsed and placed into the tables array.
 */

Page = function (url) {
	let me = this;
	let results_or_rankings = url.endsWith("rankings.html");
	console.log(url, results_or_rankings);
	var text = (results_or_rankings ? rankingsCache : matchresultsCache).toUpperCase();

	var raw = [];
	var data = [];
	var raw = text.split("\n");
	for (var i = 0; i < raw.length; i++) {
		raw[i] = raw[i].split(";");
		data[i] = [];
		for (var j = 0; j < raw[i].length; j++) {
			data[i][j] = parseFloat(raw[i][j]);
			var isnumber = raw[i][j].replace(/[0123456789\.]/g, "").trim() == ""; //contains only the decimal, spaces, and numbers.
			if (isnumber && !isNaN(data[i][j])) {
				data[i].hasdata = true;
			}
		}
	}

	me.tables = [];
	for (var i = 0; i < data.length; i++) {
		if (data[i].hasdata) {
			//New table!!!!!!!!!!!!
			var ra = [];
			var dat = [];
			for (var u = i; u < data.length; u++) {
				if (!data[u].hasdata) {
					me.tables[me.tables.length] = new Table(raw[i - 1], ra, dat);
					i = u;
					break;
				} else {
					ra[ra.length] = raw[u];
					dat[dat.length] = data[u];
				}
			}
		}
	}

	this.ready = true;
}

/*function Page(url) {
	var me = this;
	this.returnto = function() {
		if (me.r.readyState != 4) {
			return;
		}
		var text = me.r.responseText.toUpperCase();
		var raw = [];
		var data = [];
		var raw = text.split("\n");
		for (var i = 0; i < raw.length; i++) {
			raw[i] = raw[i].split(";");
			data[i] = [];
			for (var j = 0; j < raw[i].length; j++) {
				data[i][j] = parseFloat(raw[i][j]);
				var isnumber = raw[i][j].replace(/[0123456789\.]/g,"").trim() == ""; //contains only the decimal, spaces, and numbers.
				if (isnumber && !isNaN(data[i][j])) {
					data[i].hasdata = true;
				}
			}
		}

		me.tables = [];
		for (var i = 0; i < data.length; i++) {
			if (data[i].hasdata) {
			//New table!!!!!!!!!!!!
				var ra = [];
				var dat = [];
				for (var u = i; u < data.length; u++) {
					if (!data[u].hasdata) {
						me.tables[me.tables.length] = new Table(raw[i-1] , ra,dat );
						i = u;
						break;
					} else {
						ra[ra.length] = raw[u];
						dat[dat.length] = data[u];
					}
				}
			}
		}
		me.ready = true;
	}
	this.r = createRequest();
	this.r.open("GET","?grab=" + url,true);
	this.r.onreadystatechange = this.returnto;
	this.r.send();
}*/
